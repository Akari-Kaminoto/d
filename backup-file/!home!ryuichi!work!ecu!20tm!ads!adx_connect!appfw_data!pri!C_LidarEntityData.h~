#ifndef DATA_DEFINITION_C_LIDARENTITYDATA_H
#define DATA_DEFINITION_C_LIDARENTITYDATA_H

#include "Covariance.h"
#include "Position2D.h"
#include "Size2D.h"
#include "Velocity2D.h"
#include "Velocity2D.h"
#include "appfw.h"
#include "system_constants.h"
#include <stddef.h>

#define C_LIDARENTITYDATA_DATAINFO                                             \
  "{\"name\": \"C_LidarEntityData\", \"description\": "                        \
  "\"C_LiDAR\u7269\u6a19\", \"members\": [{\"name\": \"age\", \"type\": "      \
  "\"int32_t\", \"default\": \"0.0\", \"description\": "                       \
  "\"\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u56de\u6570\", \"min\": 0, "         \
  "\"max\": 65535, \"lsb\": 1}, {\"name\": \"hidden_age\", \"type\": "         \
  "\"uint8_t\", \"default\": \"0.0\", \"description\": "                       \
  "\"\u30ed\u30b9\u30c8\u56de\u6570\", \"min\": 0, \"max\": 255, \"lsb\": "    \
  "1}, {\"name\": \"rect_box_center\", \"type\": " POSITION2D_DATAINFO         \
  ", \"description\": \"\u77e9\u5f62box\u306e\u4e2d\u5fc3\"}, {\"name\": "     \
  "\"rect_box_size\", \"type\": " SIZE2D_DATAINFO                              \
  ", \"description\": \"\u77e9\u5f62box\u306e\u30b5\u30a4\u30ba\"}, "          \
  "{\"name\": \"rect_box_height\", \"type\": \"float\", \"default\": "         \
  "\"0.0\", \"unit\": \"m\", \"description\": "                                \
  "\"\u77e9\u5f62box\u306e\u9ad8\u3055\", \"min\": 0, \"max\": 65.535, "       \
  "\"lsb\": 1}, {\"name\": \"yaw\", \"type\": \"float\", \"default\": "        \
  "\"0.0\", \"unit\": \"deg\", \"description\": "                              \
  "\"\u77e9\u5f62box\u306eyaw\u89d2\", \"min\": 0, \"max\": 359.975, "         \
  "\"lsb\": 1}, {\"name\": \"abs_velocity\", \"type\": " VELOCITY2D_DATAINFO   \
  ", \"description\": \"\u7d76\u5bfe\u901f\u5ea6\"}, {\"name\": "              \
  "\"rel_velocity\", \"type\": " VELOCITY2D_DATAINFO                           \
  ", \"description\": \"\u76f8\u5bfe\u901f\u5ea6\"}, {\"name\": "              \
  "\"abs_acceleration_x\", \"type\": \"float\", \"default\": \"0.0\", "        \
  "\"unit\": \"m/s^2\", \"description\": "                                     \
  "\"\u7d76\u5bfe\u52a0\u901f\u5ea6x\", \"min\": -3276.8, \"max\": 3276.7, "   \
  "\"lsb\": 1}, {\"name\": \"covariance_obs\", \"type\": " COVARIANCE_DATAINFO \
  ", \"description\": \"\u8aa4\u5dee\u5171\u5206\u6563\"}, {\"name\": "        \
  "\"object_flags\", \"type\": \"uint64_t\", \"default\": \"0.0\", "           \
  "\"description\": "                                                          \
  "\"\u7269\u6a19\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u60c5\u5831\", "         \
  "\"min\": 0, \"max\": 4294967295, \"lsb\": 1}, {\"name\": "                  \
  "\"object_classification\", \"type\": \"uint8_t\", \"default\": \"0.0\", "   \
  "\"description\": \"\u7269\u6a19\u7a2e\u5225\", \"min\": 0, \"max\": 255, "  \
  "\"lsb\": 1}, {\"name\": \"new_object_flag\", \"type\": \"uint8_t\", "       \
  "\"default\": \"0.0\", \"description\": "                                    \
  "\"\u65b0\u898f\u30d5\u30e9\u30b0\", \"min\": 0, \"max\": 1, \"lsb\": 1}, "  \
  "{\"name\": \"tracking_flag\", \"type\": \"uint8_t\", \"default\": "         \
  "\"0.0\", \"description\": "                                                 \
  "\"\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u30d5\u30e9\u30b0\", \"min\": 0, "   \
  "\"max\": 1, \"lsb\": 1}, {\"name\": \"moving_object_flag\", \"type\": "     \
  "\"uint8_t\", \"default\": \"0.0\", \"description\": "                       \
  "\"\u79fb\u52d5\u7269\u30d5\u30e9\u30b0\", \"min\": 0, \"max\": 1, "         \
  "\"lsb\": 1}, {\"name\": \"extrapolation_flag\", \"type\": \"uint8_t\", "    \
  "\"default\": \"0.0\", \"description\": "                                    \
  "\"\u5916\u633f\u30d5\u30e9\u30b0\", \"min\": 0, \"max\": 1, \"lsb\": 1}, "  \
  "{\"name\": \"early_output_flag\", \"type\": \"uint8_t\", \"default\": "     \
  "\"0.0\", \"description\": \"\u65e9\u51fa\u3057\u30d5\u30e9\u30b0\", "       \
  "\"min\": 0, \"max\": 1, \"lsb\": 1}, {\"name\": \"fov_edge_flag_right\", "  \
  "\"type\": \"uint8_t\", \"default\": \"0.0\", \"description\": "             \
  "\"\u5de6\u8996\u91ce\u7aef\u30d5\u30e9\u30b0\", \"min\": 0, \"max\": 1, "   \
  "\"lsb\": 1}, {\"name\": \"fov_edge_flag_left\", \"type\": \"uint8_t\", "    \
  "\"default\": \"0.0\", \"description\": "                                    \
  "\"\u53f3\u8996\u91ce\u7aef\u30d5\u30e9\u30b0\", \"min\": 0, \"max\": 1, "   \
  "\"lsb\": 1}, {\"name\": \"ghost_candidate_object\", \"type\": "             \
  "\"uint8_t\", \"default\": \"0.0\", \"description\": "                       \
  "\"\u30b4\u30fc\u30b9\u30c8\u5019\u88dc\u30d5\u30e9\u30b0\", \"min\": 0, "   \
  "\"max\": 1, \"lsb\": 1}, {\"name\": \"object_quality\", \"type\": "         \
  "\"uint8_t\", \"default\": \"0.0\", \"description\": "                       \
  "\"\u7269\u6a19\u4fe1\u983c\u5ea6\", \"min\": 0, \"max\": 255, \"lsb\": "    \
  "1}, {\"name\": \"classification_certainty\", \"type\": \"uint8_t\", "       \
  "\"default\": \"0.0\", \"description\": "                                    \
  "\"\u8b58\u5225\u4fe1\u983c\u5ea6\", \"min\": 0, \"max\": 255, \"lsb\": "    \
  "1}, {\"name\": \"valid_flag\", \"type\": \"uint8_t\", \"default\": "        \
  "\"0.0\", \"description\": \"\u7269\u6a19\u6709\u52b9\u30d5\u30e9\u30b0\", " \
  "\"min\": 0, \"max\": 1, \"lsb\": 1}], \"ignore_naming_rule\": true, "       \
  "\"ads\": false, \"name_snake_case\": \"c_lidar_entity_data\"}"

#ifdef __cplusplus
extern "C" {
#endif

// C_LidarEntityData.hで定義されている型をシリアライズした時のバイト数
#define C_LIDARENTITYDATA_SERIALIZED_SIZE                                      \
  (4 + 1 + POSITION2D_SERIALIZED_SIZE + SIZE2D_SERIALIZED_SIZE + 4 + 4 +       \
   VELOCITY2D_SERIALIZED_SIZE + VELOCITY2D_SERIALIZED_SIZE + 4 +               \
   COVARIANCE_SERIALIZED_SIZE + 8 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 +    \
   1 + 1)

// 定数の定義
#define C_LIDAR_ENTITY_DATA_AGE_MIN ((int32_t)0)
#define C_LIDAR_ENTITY_DATA_AGE_MAX ((int32_t)65535)
#define C_LIDAR_ENTITY_DATA_HIDDEN_AGE_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_HIDDEN_AGE_MAX ((uint8_t)255)
#define C_LIDAR_ENTITY_DATA_RECT_BOX_HEIGHT_MIN ((float)0)
#define C_LIDAR_ENTITY_DATA_RECT_BOX_HEIGHT_MAX ((float)65.535)
#define C_LIDAR_ENTITY_DATA_YAW_MIN ((float)0)
#define C_LIDAR_ENTITY_DATA_YAW_MAX ((float)359.975)
#define C_LIDAR_ENTITY_DATA_ABS_ACCELERATION_X_MIN ((float)-3276.8)
#define C_LIDAR_ENTITY_DATA_ABS_ACCELERATION_X_MAX ((float)3276.7)
#define C_LIDAR_ENTITY_DATA_OBJECT_FLAGS_MIN ((uint64_t)0)
#define C_LIDAR_ENTITY_DATA_OBJECT_FLAGS_MAX ((uint64_t)4294967295)
#define C_LIDAR_ENTITY_DATA_OBJECT_CLASSIFICATION_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_OBJECT_CLASSIFICATION_MAX ((uint8_t)255)
#define C_LIDAR_ENTITY_DATA_NEW_OBJECT_FLAG_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_NEW_OBJECT_FLAG_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_TRACKING_FLAG_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_TRACKING_FLAG_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_MOVING_OBJECT_FLAG_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_MOVING_OBJECT_FLAG_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_EXTRAPOLATION_FLAG_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_EXTRAPOLATION_FLAG_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_EARLY_OUTPUT_FLAG_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_EARLY_OUTPUT_FLAG_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_FOV_EDGE_FLAG_RIGHT_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_FOV_EDGE_FLAG_RIGHT_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_FOV_EDGE_FLAG_LEFT_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_FOV_EDGE_FLAG_LEFT_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_GHOST_CANDIDATE_OBJECT_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_GHOST_CANDIDATE_OBJECT_MAX ((uint8_t)1)
#define C_LIDAR_ENTITY_DATA_OBJECT_QUALITY_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_OBJECT_QUALITY_MAX ((uint8_t)255)
#define C_LIDAR_ENTITY_DATA_CLASSIFICATION_CERTAINTY_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_CLASSIFICATION_CERTAINTY_MAX ((uint8_t)255)
#define C_LIDAR_ENTITY_DATA_VALID_FLAG_MIN ((uint8_t)0)
#define C_LIDAR_ENTITY_DATA_VALID_FLAG_MAX ((uint8_t)1)

/* C_LiDAR物標 */
typedef struct {
  int32_t age;                      /* トラッキング回数 */
  uint8_t hidden_age;               /* ロスト回数 */
  Position2D rect_box_center;       /* 矩形boxの中心 */
  Size2D rect_box_size;             /* 矩形boxのサイズ */
  float rect_box_height;            /* 矩形boxの高さ */
  float yaw;                        /* 矩形boxのyaw角 */
  Velocity2D abs_velocity;          /* 絶対速度 */
  Velocity2D rel_velocity;          /* 相対速度 */
  float abs_acceleration_x;         /* 絶対加速度x */
  Covariance covariance_obs;        /* 誤差共分散 */
  uint64_t object_flags;            /* 物標のステータス情報 */
  uint8_t object_classification;    /* 物標種別 */
  uint8_t new_object_flag;          /* 新規フラグ */
  uint8_t tracking_flag;            /* トラッキングフラグ */
  uint8_t moving_object_flag;       /* 移動物フラグ */
  uint8_t extrapolation_flag;       /* 外挿フラグ */
  uint8_t early_output_flag;        /* 早出しフラグ */
  uint8_t fov_edge_flag_right;      /* 左視野端フラグ */
  uint8_t fov_edge_flag_left;       /* 右視野端フラグ */
  uint8_t ghost_candidate_object;   /* ゴースト候補フラグ */
  uint8_t object_quality;           /* 物標信頼度 */
  uint8_t classification_certainty; /* 識別信頼度 */
  uint8_t valid_flag;               /* 物標有効フラグ */
} C_LidarEntityData;

size_t SerializeC_LidarEntityData(void *buffer, C_LidarEntityData *data,
                                  size_t max_buffer_size);
size_t DeserializeC_LidarEntityData(C_LidarEntityData *data, void *buffer);
size_t SerializeC_LidarEntityDataAutoRelease(void *buffer, void *data,
                                             size_t max_buffer_size);
size_t DeserializeC_LidarEntityDataForDumper(void *data, void *buffer);
bool IsEqualC_LidarEntityData(C_LidarEntityData *data1,
                              C_LidarEntityData *data2);
void InitializeC_LidarEntityData(C_LidarEntityData *data);
void InitializeDefaultOnlyC_LidarEntityData(C_LidarEntityData *data);

#ifdef __cplusplus
}
#endif

#endif // DATA_DEFINITION_C_LIDARENTITYDATA_H
