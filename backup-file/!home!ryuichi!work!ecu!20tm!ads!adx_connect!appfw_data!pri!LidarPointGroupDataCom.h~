#ifndef DATA_DEFINITION_LIDARPOINTGROUPDATACOM_H
#define DATA_DEFINITION_LIDARPOINTGROUPDATACOM_H

#include "PointGroup.h"
#include "PointGroup.h"
#include "RecognitionData.h"
#include "appfw.h"
#include "system_constants.h"
#include <stddef.h>

#define LIDARPOINTGROUPDATACOM_DATAINFO                                        \
  "{\"name\": \"LidarPointGroupDataCom\", \"description\": "                   \
  "\"LiDAR\u70b9\u7fa4\", \"members\": [{\"name\": \"sensor_type\", "          \
  "\"type\": \"uint8_t\", \"description\": "                                   \
  "\"\u30bb\u30f3\u30b5\u30bf\u30a4\u30d7\", \"min\": 0, \"max\": 255, "       \
  "\"ignore_naming_rule\": true}, {\"name\": \"packet_id\", \"type\": "        \
  "\"uint8_t\", \"description\": \"\u30d1\u30b1\u30c3\u30c8ID\", \"min\": 0, " \
  "\"max\": 255, \"ignore_naming_rule\": true}, {\"name\": \"time_stamp\", "   \
  "\"type\": \"uint64_t\", \"description\": "                                  \
  "\"\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\", \"unit\": \"ms\", "         \
  "\"min\": 0, \"max\": 255, \"ignore_naming_rule\": true}, {\"name\": "       \
  "\"recognition_data\", \"type\": " RECOGNITIONDATA_DATAINFO                  \
  ", \"dimension\": [23542], \"description\": "                                \
  "\"\u8a8d\u8b58\u7528\u30c7\u30fc\u30bf\", \"ignore_naming_rule\": true}, "  \
  "{\"name\": \"first_points\", \"type\": " POINTGROUP_DATAINFO                \
  ", \"dimension\": [3306], \"description\": "                                 \
  "\"\u70b9\u7fa4\u30c7\u30fc\u30bf(\u7b2c1\u30a8\u30b3\u30fc)\", "            \
  "\"ignore_naming_rule\": true}, {\"name\": \"second_points\", "              \
  "\"type\": " POINTGROUP_DATAINFO                                             \
  ", \"dimension\": [3306], \"description\": "                                 \
  "\"\u70b9\u7fa4\u30c7\u30fc\u30bf(\u7b2c2\u30a8\u30b3\u30fc)\", "            \
  "\"ignore_naming_rule\": true}], \"ignore_naming_rule\": true, \"ads\": "    \
  "false, \"name_snake_case\": \"lidar_point_group_data_com\"}"

#ifdef __cplusplus
extern "C" {
#endif

// LidarPointGroupDataCom.hで定義されている型をシリアライズした時のバイト数
#define LIDARPOINTGROUPDATACOM_SERIALIZED_SIZE                                 \
  (1 + 1 + 8 + RECOGNITIONDATA_SERIALIZED_SIZE * (23542) +                     \
   POINTGROUP_SERIALIZED_SIZE * (3306) + POINTGROUP_SERIALIZED_SIZE * (3306))

// 定数の定義
#define LIDAR_POINT_GROUP_DATA_COM_SENSOR_TYPE_MIN ((uint8_t)0)
#define LIDAR_POINT_GROUP_DATA_COM_SENSOR_TYPE_MAX ((uint8_t)255)
#define LIDAR_POINT_GROUP_DATA_COM_PACKET_ID_MIN ((uint8_t)0)
#define LIDAR_POINT_GROUP_DATA_COM_PACKET_ID_MAX ((uint8_t)255)
#define LIDAR_POINT_GROUP_DATA_COM_TIME_STAMP_MIN ((uint64_t)0)
#define LIDAR_POINT_GROUP_DATA_COM_TIME_STAMP_MAX ((uint64_t)255)
#define LIDAR_POINT_GROUP_DATA_COM_RECOGNITION_DATA_DIM1 ((size_t)23542)
#define LIDAR_POINT_GROUP_DATA_COM_FIRST_POINTS_DIM1 ((size_t)3306)
#define LIDAR_POINT_GROUP_DATA_COM_SECOND_POINTS_DIM1 ((size_t)3306)

/* LiDAR点群 */
typedef struct {
  uint8_t sensor_type;                     /* センサタイプ */
  uint8_t packet_id;                       /* パケットID */
  uint64_t time_stamp;                     /* タイムスタンプ */
  RecognitionData recognition_data[23542]; /* 認識用データ */
  PointGroup first_points[3306];           /* 点群データ(第1エコー) */
  PointGroup second_points[3306];          /* 点群データ(第2エコー) */
} LidarPointGroupDataCom;

size_t SerializeLidarPointGroupDataCom(void *buffer,
                                       LidarPointGroupDataCom *data,
                                       size_t max_buffer_size);
size_t DeserializeLidarPointGroupDataCom(LidarPointGroupDataCom *data,
                                         void *buffer);
size_t SerializeLidarPointGroupDataComAutoRelease(void *buffer, void *data,
                                                  size_t max_buffer_size);
size_t DeserializeLidarPointGroupDataComForDumper(void *data, void *buffer);
bool IsEqualLidarPointGroupDataCom(LidarPointGroupDataCom *data1,
                                   LidarPointGroupDataCom *data2);
void InitializeLidarPointGroupDataCom(LidarPointGroupDataCom *data);
void InitializeDefaultOnlyLidarPointGroupDataCom(LidarPointGroupDataCom *data);

#ifdef __cplusplus
}
#endif

#endif // DATA_DEFINITION_LIDARPOINTGROUPDATACOM_H
